#!/usr/bin/php -q
<?php

// Import classes

$lib_dir = dirname(dirname(__FILE__)) . "/lib/hedgehog";
if($fh = opendir($lib_dir))
{
	while(false != ($lib_file = readdir($fh)))
	{
		if(preg_match("/\\.php$/", $lib_file) == 0)
		{
			continue;
		}
		include_once($lib_dir . '/' . $lib_file);
	}
}

foreach(array_splice($argv, 1) as $quillid)
{
    error_log($quillid);
    $quill = new SpecialQuill($quillid);
    $ret = 1;
    if(!($quill->isValid())) {
        $quill = new Quill($quillid);
    }
    if($quill->isValid()) { $ret = $quill->publish(); }
    if($ret > 0) { var_dump($quill->errors); exit(1); }
}
